class e{static getCookie(e){const t=document.cookie.match(`(^|;)\\s*${e}\\s*=\\s*([^;]+)`);return t?t.pop():""}static setCookie({name:e,value:t,expirationYears:a}){const i=window.location.hostname,o=new Date;o.setFullYear(o.getFullYear()+a);const s=o.toUTCString();document.cookie=`${e}=${t};expires=${s};domain=${i};path=/;SameSite=None;secure`}static deleteCookie(e){this.setCookie({name:e,value:"nothing",expirationYears:-100})}}class t{constructor(){this.cookieName="iframeswitch",this.expirationYears=10,this.addButtonEvents(),this.autoEnableIframes(),t.addDomainInformation(),window.iframeSwitch=this}static changeElementToIframe(e){const a=t.getAllDataAttributes(e),i=document.createElement("iframe");a.forEach(e=>{i.setAttribute(e.name,e.value)});const o=e.parentNode;o.insertBefore(i,e),o.classList.remove("iframeswitch-init"),o.removeChild(e)}autoEnableIframes(){const a=document.querySelectorAll("[data-iframeswitch-src]"),i=e.getCookie(this.cookieName).split(",");a.forEach(e=>{if(i.includes("*"))return void t.changeElementToIframe(e);const a=t.extractHostname(e.getAttribute("data-iframeswitch-src"));i.forEach(i=>{i===a&&t.changeElementToIframe(e)})})}static addDomainInformation(){document.querySelectorAll("[data-iframeswitch-uri]").forEach(e=>{const a=t.closest(e,"[data-iframeswitch-src]").getAttribute("data-iframeswitch-src");e.innerHTML=t.extractHostname(a)})}addButtonEvents(){document.querySelectorAll("[data-iframeswitch-src]").forEach(a=>{a.querySelector("[data-iframeswitch-submit]").addEventListener("click",a=>{const i=t.closest(a.target,"[data-iframeswitch-src]"),o=e.getCookie(this.cookieName);if("*"===o)return;const s=t.extractHostname(i.getAttribute("data-iframeswitch-src"));e.setCookie({name:this.cookieName,value:o.length>0?`${o},${s}`:s,expirationYears:this.expirationYears}),this.autoEnableIframes()})})}static closest(e,t){let a,i;for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(e=>"function"==typeof document.body[e]&&(a=e,!0));e;){if(i=e.parentElement,i&&i[a](t))return i;e=i}return null}static getAllDataAttributes(e){const t=[];return Array.from(e.attributes).forEach(e=>{-1!==e.name.indexOf("data-iframeswitch-")&&t.push({name:e.name.replace("data-iframeswitch-",""),value:e.value})}),t}static extractHostname(e){let t;return t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0],t=t.split("?")[0],t}enableAll(){e.setCookie({name:this.cookieName,value:"*",expirationYears:this.expirationYears}),this.autoEnableIframes()}disableAll(){e.deleteCookie(this.cookieName)}}new t;
//# sourceMappingURL=in2iframeconsent.modern.js.map
